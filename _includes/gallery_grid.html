{% assign items = include.items | default: site.gallery %}
<div class="row g-3" id="gallery-grid">
{% for item in items %}
  {% if include.category %}
    {% assign cat = include.category %}
    {% assign has_tag = false %}
    {% for t in item.tags %}
      {% if t == cat %}{% assign has_tag = true %}{% endif %}
    {% endfor %}
    {% if has_tag != true %}
      {% continue %}
    {% endif %}
  {% endif %}
  <div class="col-12 col-sm-6 col-md-4 gallery-item" data-location="{{ item.location | downcase }}" data-style="{{ item.style | join: ' ' | downcase }}" data-theme="{{ item.theme | join: ' ' | downcase }}" data-reveal>
    <div class="flip-card" tabindex="0" aria-label="Flip to view details">
      <div class="flip-inner">
        <div class="flip-front">
          <img class="card-img-top gallery-card-img" src="{{ item.image | relative_url }}" alt="{{ item.alt }}" loading="lazy" />
        </div>
        <div class="flip-back">
          <div class="p-3">
            <div class="small text-muted text-uppercase mb-1">{{ item.tags | join: ', ' }}</div>
            <div class="fw-semibold">{{ item.title }}</div>
            {% if item.caption %}<div class="small">{{ item.caption }}</div>{% endif %}
            {% if item.size %}<div class="small">Size: {{ item.size }}</div>{% endif %}
            {% if item.location %}<div class="small">City: {{ item.location }}</div>{% endif %}
            <div class="mt-2"><a class="btn btn-sm btn-primary" href="{{ '/book/' | relative_url }}">Request a commission</a></div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endfor %}
{% if items == empty %}
  <div class="col-12"><p>No items yet. Add some in <code>_gallery/</code> or via <a href="{{ '/admin/' | relative_url }}">CMS</a>.</p></div>
{% endif %}
</div>
